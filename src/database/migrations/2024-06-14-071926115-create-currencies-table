-- Up

CREATE TABLE IF NOT EXISTS `currencies`
  (
    `id` INT UNSIGNED AUTO_INCREMENT NOT NULL,
    `uuid` BINARY(16) NOT NULL,
    `name` VARCHAR(255) NOT NULL,
    `code` CHAR(3) NOT NULL,
    `symbol` VARCHAR(8) NOT NULL,
    `country_id` INT UNSIGNED NOT NULL,
    `write_mode_id` INT UNSIGNED NOT NULL,
    `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    CONSTRAINT `currencies_id_primary_key` PRIMARY KEY (`id`),
    CONSTRAINT `currencies_uuid_unique_key` UNIQUE (`uuid`),
    CONSTRAINT `currencies_name_country_id_unique_key` UNIQUE (`name`, `country_id`),
    CONSTRAINT `currencies_code_country_id_unique_key` UNIQUE (`code`, `country_id`),
    CONSTRAINT `currencies_country_id_foreign_key` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT `currencies_write_mode_id_foreign_key` FOREIGN KEY (`write_mode_id`) REFERENCES `write_modes` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
  ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

--- // ---

-- Down

DROP TABLE IF EXISTS `currencies`;
